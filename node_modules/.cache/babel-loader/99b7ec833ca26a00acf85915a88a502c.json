{"ast":null,"code":"var _jsxFileName = \"/Users/simoneanthony/Desktop/personal-projects/blackjack-takehome/src/components/GameArena.tsx\",\n  _s = $RefreshSig$();\n// import axios from \"axios\";\nimport { useState, useEffect, useCallback, useRef } from \"react\";\nimport { fetchNewDeck, drawCards } from \"../API/getRequests\";\nimport MapCards from \"./MapCards\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction GameArena() {\n  _s();\n  const isMountedRef = useRef(false);\n  const [playerTurn, setPlayerTurn] = useState(false);\n  const [deckId, setDeckId] = useState(null);\n  const [playersCards, setPlayersCards] = useState([]);\n  const [totalPlayerInfo, setTotalPlayerInfo] = useState({\n    total: 0,\n    acePositions: [],\n    lastReadCardIndex: 0\n  });\n  const [computersCards, setComputersCards] = useState([]);\n  const [totalComputerInfo, setTotalComputerInfo] = useState({\n    total: 0,\n    acePositions: [],\n    lastReadCardIndex: 0\n  });\n  const [didPlayerWin, setDidPlayerWin] = useState(null);\n  const [didPlayerStand, setDidPlayerStand] = useState(false);\n  const drawCard = useCallback(() => {\n    if (deckId && playerTurn) {\n      // else it is players turn to pick a card\n      (async () => {\n        const {\n          data: {\n            cards\n          }\n        } = await drawCards(deckId);\n        // add card to playersCards\n        setPlayersCards(prevState => [...prevState, ...cards]);\n        // the player is done drawing a card\n        // setPlayerTurn(false);\n      })();\n    }\n  }, [deckId, playerTurn]);\n  useEffect(() => {\n    if (isMountedRef.current) return;\n    (async () => {\n      // create a deck\n      const {\n        data: {\n          deck_id\n        }\n      } = await fetchNewDeck();\n\n      // save the deck_id to state\n      setDeckId(deck_id);\n\n      /* \n      this has been added to prevent this hook from fetching a DeckId twice\n       because of React.StrictMode\n      */\n      isMountedRef.current = true;\n    })();\n  }, []);\n  useEffect(() => {\n    if (!deckId) return;\n    console.log('deckId', deckId);\n\n    // initial cards for computer and player\n    (async () => {\n      // computer draws cards\n      const {\n        data: {\n          cards: computersCards\n        }\n      } = await drawCards(deckId, 2);\n      setComputersCards(computersCards);\n\n      // player draws cards\n      const {\n        data: {\n          cards: playerCards\n        }\n      } = await drawCards(deckId, 2);\n      setPlayersCards(playerCards);\n\n      // change turns\n      setPlayerTurn(true);\n    })();\n  }, [deckId]);\n\n  /* \n  In the future, this calculation can be memoized, instead of calculating the total from the\n  beginning of the array, the position of the last element can be saved and the array can \n  iterate from that position rather than the beginning\n  */\n  const calcCardTotal = useCallback((cardsArr, setStateFunc) => {\n    let total = 0;\n    const acePositionArr = [];\n    cardsArr.forEach((_ref, index) => {\n      let {\n        value\n      } = _ref;\n      // if the value is a number, simply add it to currTotal\n      if (value === \"QUEEN\" || value === \"KING\" || value === \"JACK\") {\n        // if the value is a face card add 10\n        total += 10;\n      } else if (value === \"ACE\") {\n        // if the value is an ace, by default is equal to 11\n        total += 11;\n        // acePosition.push(currIndex);\n        acePositionArr.push(index);\n      } else {\n        const NumericVal = Number(value);\n        total += NumericVal;\n      }\n    });\n    setStateFunc(prevState => ({\n      ...prevState,\n      total,\n      acePositions: [...acePositionArr]\n    }));\n  }, []);\n  useEffect(() => {\n    // if playersCards were added recalculate the total\n    if (playersCards.length > 0 && totalPlayerInfo.lastReadCardIndex !== playersCards.length) {\n      const currentReadIndex = totalPlayerInfo.lastReadCardIndex;\n      let newLastReadIndex = currentReadIndex;\n      let newTotal = totalPlayerInfo.total;\n      const acePositionArr = totalPlayerInfo.acePositions;\n\n      // arr to traverse from lastReadCardIndex\n      const newlyAddedCardsArr = playersCards.slice(currentReadIndex);\n      newlyAddedCardsArr.forEach(_ref2 => {\n        let {\n          value\n        } = _ref2;\n        // if the value is a number, simply add it to currTotal\n        if (value === \"QUEEN\" || value === \"KING\" || value === \"JACK\") {\n          // if the value is a face card add 10\n          newTotal += 10;\n        } else if (value === \"ACE\") {\n          // if the value is an ace, by default is equal to 11\n          newTotal += 11;\n          // acePosition.push(currIndex);\n          acePositionArr.push(newLastReadIndex);\n        } else {\n          const NumericVal = Number(value);\n          newTotal += NumericVal;\n        }\n        newLastReadIndex += 1;\n      });\n      setTotalPlayerInfo({\n        total: newTotal,\n        acePositions: [...acePositionArr],\n        lastReadCardIndex: newLastReadIndex\n      });\n      // console.log('playersCards', playersCards);\n      // console.log('newlyAddedCardsArr', newlyAddedCardsArr);\n      // console.log('currentReadIndex', newLastReadIndex);\n      // console.log('total', newTotal);\n\n      // calcCardTotal(playersCards, setTotalPlayerInfo);\n    }\n  }, [playersCards, totalPlayerInfo.acePositions, totalPlayerInfo.lastReadCardIndex, totalPlayerInfo.total]);\n\n  // useEffect(() => {\n  //   console.log('totalPlayerInfo', totalPlayerInfo);\n  // }, [totalPlayerInfo]);\n\n  useEffect(() => {\n    console.log('playersCards', playersCards);\n  }, [playersCards]);\n  useEffect(() => {\n    // if computersCards were added recalculate the total\n    if (computersCards.length > 0) {\n      calcCardTotal(computersCards, setTotalComputerInfo);\n    }\n  }, [calcCardTotal, computersCards]);\n\n  // check if a winner is present\n  useEffect(() => {\n    // if the player and the computer both get 21, the player loses\n    if (totalPlayerInfo.total === 21 && totalComputerInfo.total === 21) {\n      setDidPlayerWin(false);\n    } else if (totalPlayerInfo.total === 21) {\n      // if the player has a total of 21, the game is over and they win\n      setDidPlayerWin(true);\n    } else if (totalComputerInfo.total === 21) {\n      // if the computer has a total of 21, the game is over and it wins\n      setDidPlayerWin(false);\n    } else if (totalPlayerInfo.total > 21) {\n      // if the user has a score of over 21, check to see if they have aces\n      if (totalPlayerInfo.acePositions.length > 0) {\n        // if there are aces, subtract 11 points from the user and add 1, pop an ace from the acePositions \n        setTotalPlayerInfo(prevState => ({\n          ...prevState,\n          total: prevState.total - 11 + 1,\n          acePositions: prevState.acePositions.slice(0, -1)\n        }));\n      } else {\n        // if not the user automatically loses\n        setDidPlayerWin(false);\n      }\n    } else if (totalComputerInfo.total > 21) {\n      // if the Computer has a score of over 21 (2 aces), check to see if they have aces\n      if (totalComputerInfo.acePositions.length > 0) {\n        // if there are aces, subtract 11 points from the user and add 1, pop an ace from the acePositions \n        setTotalComputerInfo(prevState => ({\n          ...prevState,\n          total: prevState.total - 11 + 1,\n          acePositions: prevState.acePositions.slice(0, -1)\n        }));\n      } else {\n        // if not the computer automatically loses\n        setDidPlayerWin(true);\n      }\n    } else if (didPlayerStand) {\n      // if the player did stand and there is a tie OR the users cards total less than the computers cards, the computer wins\n      if (totalPlayerInfo.total === totalComputerInfo.total || totalPlayerInfo.total < totalComputerInfo.total) {\n        setDidPlayerWin(false);\n      }\n\n      // if the player has more points than the computer, the pplayer wins\n      if (totalPlayerInfo.total > totalComputerInfo.total) {\n        setDidPlayerWin(true);\n      } else {\n        // if the player and computer tie or the player has few points than the computer, the player loses\n        setDidPlayerWin(false);\n      }\n    }\n  }, [didPlayerStand, totalComputerInfo.acePositions.length, totalComputerInfo.total, totalPlayerInfo.acePositions.length, totalPlayerInfo.total]);\n  const winLoseText = () => {\n    if (didPlayerWin === null) return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: didPlayerWin ? \"You Won\" : \"You Lose\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 12\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [winLoseText(), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-arena\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"game-panel panel-one\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Computer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(MapCards, {\n          player: \"computer\",\n          cards: computersCards\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Total: \", totalComputerInfo.total]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"game-panel panel-two\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(MapCards, {\n          player: \"user\",\n          cards: playersCards\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Total: \", totalPlayerInfo.total]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 9\n        }, this), winLoseText(), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"btn-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => drawCard(),\n            disabled: didPlayerStand || didPlayerWin !== null,\n            children: \"Hit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => setDidPlayerStand(true),\n            children: \"Stand\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => {\n              window.location.href = \"/\";\n            },\n            children: \"Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n\n// by default aces can be given a value of 10\n_s(GameArena, \"fu6GN+kzzJxVX9EQH23jLv0MC7g=\");\n_c = GameArena;\nexport default GameArena;\nvar _c;\n$RefreshReg$(_c, \"GameArena\");","map":{"version":3,"names":["useState","useEffect","useCallback","useRef","fetchNewDeck","drawCards","MapCards","GameArena","isMountedRef","playerTurn","setPlayerTurn","deckId","setDeckId","playersCards","setPlayersCards","totalPlayerInfo","setTotalPlayerInfo","total","acePositions","lastReadCardIndex","computersCards","setComputersCards","totalComputerInfo","setTotalComputerInfo","didPlayerWin","setDidPlayerWin","didPlayerStand","setDidPlayerStand","drawCard","data","cards","prevState","current","deck_id","console","log","playerCards","calcCardTotal","cardsArr","setStateFunc","acePositionArr","forEach","index","value","push","NumericVal","Number","length","currentReadIndex","newLastReadIndex","newTotal","newlyAddedCardsArr","slice","winLoseText","window","location","href"],"sources":["/Users/simoneanthony/Desktop/personal-projects/blackjack-takehome/src/components/GameArena.tsx"],"sourcesContent":["// import axios from \"axios\";\nimport { useState, useEffect, useCallback, useRef } from \"react\";\nimport { fetchNewDeck, drawCards } from \"../API/getRequests\";\nimport MapCards from \"./MapCards\";\n\nexport interface ICard {\n  code: string;\n  image: string;\n  images: {\n    svg: string;\n    png: string;\n  };\n  value: string;\n  suit: string;\n}\n\ninterface ITotalInfo {\n  total: number;\n  acePositions: number[];\n  lastReadCardIndex: number;\n}\n\nfunction GameArena() {\n  const isMountedRef = useRef(false);\n\n  const [playerTurn, setPlayerTurn] = useState(false);\n  const [deckId, setDeckId] = useState<null | string>(null);\n\n  const [playersCards, setPlayersCards] = useState<ICard[]>([]);\n  const [totalPlayerInfo, setTotalPlayerInfo] = useState<ITotalInfo>({\n    total: 0,\n    acePositions: [],\n    lastReadCardIndex: 0\n  });\n\n  const [computersCards, setComputersCards] = useState<ICard[]>([]);\n  const [totalComputerInfo, setTotalComputerInfo] = useState<ITotalInfo>({\n    total: 0,\n    acePositions: [],\n    lastReadCardIndex: 0\n  });\n\n  const [didPlayerWin, setDidPlayerWin] = useState<null | boolean>(null);\n  const [didPlayerStand, setDidPlayerStand] = useState<boolean>(false);\n\n  const drawCard = useCallback(() => {\n    if (deckId && playerTurn) {\n      // else it is players turn to pick a card\n      (async () => {\n        const {\n          data: { cards },\n        } = await drawCards(deckId);\n        // add card to playersCards\n        setPlayersCards((prevState) => [...prevState, ...cards]);\n        // the player is done drawing a card\n        // setPlayerTurn(false);\n      })();\n    }\n  }, [deckId, playerTurn]);\n\n  useEffect(() => {\n\n    if (isMountedRef.current) return;\n\n    (async () => {\n      // create a deck\n      const {\n        data: { deck_id },\n      } = await fetchNewDeck();\n\n      // save the deck_id to state\n      setDeckId(deck_id);\n    \n      /* \n      this has been added to prevent this hook from fetching a DeckId twice\n       because of React.StrictMode\n      */\n      isMountedRef.current = true;\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (!deckId) return;\n\n    console.log('deckId', deckId);\n\n    // initial cards for computer and player\n    (async () => {\n      // computer draws cards\n      const {\n        data: { cards: computersCards },\n      } = await drawCards(deckId, 2);\n\n      setComputersCards(computersCards);\n\n      // player draws cards\n      const {\n        data: { cards: playerCards },\n      } = await drawCards(deckId, 2);\n\n      setPlayersCards(playerCards);\n\n      // change turns\n      setPlayerTurn(true);\n    })();\n  }, [deckId]);\n\n  /* \n  In the future, this calculation can be memoized, instead of calculating the total from the\n  beginning of the array, the position of the last element can be saved and the array can \n  iterate from that position rather than the beginning\n  */\n  const calcCardTotal = useCallback((cardsArr: ICard[], setStateFunc: React.Dispatch<React.SetStateAction<ITotalInfo>>) => {\n    let total = 0;\n    const acePositionArr: number[] = [];\n\n      cardsArr.forEach(({ value }, index) => {\n        // if the value is a number, simply add it to currTotal\n         if (value === \"QUEEN\" || value ===\"KING\" || value === \"JACK\") {\n          // if the value is a face card add 10\n          total += 10;\n        } else if (value === \"ACE\" ) {\n          // if the value is an ace, by default is equal to 11\n          total += 11;\n          // acePosition.push(currIndex);\n          acePositionArr.push(index);\n        } else {\n          const NumericVal = Number(value);\n          total += NumericVal;\n        }\n      });\n\n      setStateFunc((prevState) => ({\n        ...prevState,\n        total,\n        acePositions: [...acePositionArr]\n      }));\n  }, []);\n\n  useEffect(() => {\n    // if playersCards were added recalculate the total\n    if (playersCards.length > 0 && (totalPlayerInfo.lastReadCardIndex !== playersCards.length)) {\n      \n      const currentReadIndex = totalPlayerInfo.lastReadCardIndex;\n      let newLastReadIndex = currentReadIndex;\n      let newTotal =  totalPlayerInfo.total;\n      const acePositionArr: number[] = totalPlayerInfo.acePositions;\n\n      // arr to traverse from lastReadCardIndex\n      const newlyAddedCardsArr = playersCards.slice(currentReadIndex);\n      newlyAddedCardsArr.forEach(({ value }) => {\n        // if the value is a number, simply add it to currTotal\n        if (value === \"QUEEN\" || value ===\"KING\" || value === \"JACK\") {\n          // if the value is a face card add 10\n          newTotal += 10;\n        } else if (value === \"ACE\" ) {\n          // if the value is an ace, by default is equal to 11\n          newTotal += 11;\n          // acePosition.push(currIndex);\n          acePositionArr.push(newLastReadIndex);\n        } else {\n          const NumericVal = Number(value);\n          newTotal += NumericVal;\n        }\n        newLastReadIndex += 1;\n      })\n\n      \n      setTotalPlayerInfo({\n        total: newTotal,\n        acePositions: [...acePositionArr],\n        lastReadCardIndex: newLastReadIndex,\n      });\n      // console.log('playersCards', playersCards);\n      // console.log('newlyAddedCardsArr', newlyAddedCardsArr);\n      // console.log('currentReadIndex', newLastReadIndex);\n      // console.log('total', newTotal);\n\n      // calcCardTotal(playersCards, setTotalPlayerInfo);\n\n    }\n  }, [playersCards, totalPlayerInfo.acePositions, totalPlayerInfo.lastReadCardIndex, totalPlayerInfo.total]);\n\n  // useEffect(() => {\n  //   console.log('totalPlayerInfo', totalPlayerInfo);\n  // }, [totalPlayerInfo]);\n\n    useEffect(() => {\n    console.log('playersCards', playersCards);\n    }, [playersCards]);\n\n\n  useEffect(() => {\n    // if computersCards were added recalculate the total\n    if (computersCards.length > 0) {\n      calcCardTotal(computersCards, setTotalComputerInfo);\n    }\n  }, [calcCardTotal, computersCards]);\n  \n  // check if a winner is present\n  useEffect(() => {\n    // if the player and the computer both get 21, the player loses\n    if (totalPlayerInfo.total === 21 && totalComputerInfo.total === 21) {\n      setDidPlayerWin(false);\n    } else if (totalPlayerInfo.total === 21) {\n      // if the player has a total of 21, the game is over and they win\n      setDidPlayerWin(true);\n    } else if (totalComputerInfo.total === 21) {\n      // if the computer has a total of 21, the game is over and it wins\n      setDidPlayerWin(false);\n    } else if (totalPlayerInfo.total > 21) {\n      // if the user has a score of over 21, check to see if they have aces\n      if (totalPlayerInfo.acePositions.length > 0) {\n          // if there are aces, subtract 11 points from the user and add 1, pop an ace from the acePositions \n          setTotalPlayerInfo((prevState) => ({\n            ...prevState,\n            total: (prevState.total - 11) + 1,\n            acePositions: prevState.acePositions.slice(0, -1),\n          }))\n      } else {\n        // if not the user automatically loses\n        setDidPlayerWin(false);\n      }\n    } else if (totalComputerInfo.total > 21) {\n      // if the Computer has a score of over 21 (2 aces), check to see if they have aces\n      if (totalComputerInfo.acePositions.length > 0) {\n          // if there are aces, subtract 11 points from the user and add 1, pop an ace from the acePositions \n          setTotalComputerInfo((prevState) => ({\n            ...prevState,\n            total: (prevState.total - 11) + 1,\n            acePositions: prevState.acePositions.slice(0, -1),\n          }))\n      } else {\n        // if not the computer automatically loses\n        setDidPlayerWin(true);\n      }\n    } else if (didPlayerStand) {\n      // if the player did stand and there is a tie OR the users cards total less than the computers cards, the computer wins\n      if (totalPlayerInfo.total === totalComputerInfo.total || totalPlayerInfo.total < totalComputerInfo.total) {\n        setDidPlayerWin(false);\n      }\n\n      // if the player has more points than the computer, the pplayer wins\n      if (totalPlayerInfo.total > totalComputerInfo.total) {\n        setDidPlayerWin(true);\n      } else {\n        // if the player and computer tie or the player has few points than the computer, the player loses\n        setDidPlayerWin(false);\n      }\n    }\n  }, [didPlayerStand, totalComputerInfo.acePositions.length, totalComputerInfo.total, totalPlayerInfo.acePositions.length, totalPlayerInfo.total]);\n  \n  const winLoseText = () => {\n    if (didPlayerWin === null) return <></>;\n    return <div>{(didPlayerWin) ? \"You Won\" : \"You Lose\"}</div>;\n  }\n\n  return (\n    <>\n    {winLoseText()}\n    <div className=\"game-arena\">\n      <section className=\"game-panel panel-one\">\n        <h1>Computer</h1>\n        <MapCards player=\"computer\" cards={computersCards} />\n        <div>Total: {totalComputerInfo.total}</div>\n      </section>\n      <section className=\"game-panel panel-two\">\n        <h1>User</h1>\n        <MapCards player=\"user\" cards={playersCards} />\n        <div>Total: {totalPlayerInfo.total}</div>\n        {winLoseText()}\n        <section className=\"btn-container\">\n          <button type=\"button\" onClick={() => drawCard()} disabled={didPlayerStand || didPlayerWin !== null}>\n            Hit\n          </button>\n          <button type=\"button\" onClick={() => setDidPlayerStand(true)}>Stand</button>\n          {/* This is reset button can be done by resetting state but I'm out of time */}\n          <button type=\"button\" onClick={() => {window.location.href=\"/\"}}>Reset</button>\n        </section>\n      </section>\n    </div>\n    </>\n  );\n}\n\n// by default aces can be given a value of 10\n\nexport default GameArena;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}